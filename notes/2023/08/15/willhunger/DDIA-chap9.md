#### Total Order Broadcast
如果你的程序只运行在单个 CPU 核上，那么定义一个操作全序是很容易的：可以简单认为就是 CPU 执行这些操作的顺序。但是在分布式系统中，让所有节点对同一个全局操作顺序达成一致可能相当棘手。在上一节中，我们讨论了按时间戳或序列号进行排序，但发现它还不如单主复制给力（如果你使用时间戳排序来实现唯一性约束，就不能容忍任何错误，因为你必须要从每个节点都获取到最新的序列号）。

单主复制通过选择一个节点作为主库来确定操作的全序，并在主库的单个 CPU 核上对所有操作进行排序。接下来的挑战是，如果吞吐量超出单个主库的处理能力，这种情况下如何扩展系统，以及如果主库失效如何处理故障切换。这类问题在分布式系统中被称为这个问题被称为 **全序广播（total order broadcast）** 或 **原子广播（atomic broadcast** 问题。
> 原子广播和 ACID 中的原子性没有任何关系，只是与原子操作（在多线程编程的意义上 ）或原子寄存器（线性一致存储）有间接的联系。

全序广播通常被描述为在节点间交换消息的协议。 非正式地讲，它要满足两个安全属性：
* 可靠交付（reliable delivery）：没有消息丢失：如果消息被传递到一个节点，它将被传递到所有节点。
* 全序交付（totally ordered delivery）：消息以相同的顺序传递给每个节点。

即使节点或网络出现了故障，全序关系广播算法的正确实现也必须保证上述两条。当  
然， 网络中断时是不可能发送成功的， 但算法要继续重试， 直到最终网络修复， 消息  
发送成功（且必须以正确的顺序发送）。