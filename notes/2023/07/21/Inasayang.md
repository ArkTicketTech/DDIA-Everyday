流处理系统

-   无界，持续增量



发送事件流

-   批处理中，文件被写入一次，被多个作业读取
    -   文件名表示一组相关记录
-   流处理中，时间由生产一次，被多个消费者处理
    -   相关的事件被组合成主题或流



消息系统

-   生产者速度比消费者速度快？
    -   丢弃消息
    -   缓存在队列中
        -   队列持续增长？写入磁盘？
    -   激活被压（流量控制，阻止生产者发送更多消息）
        -   UNIX管道和TCP使用这个
            -   有固定大小的缓冲区，被填满，发送者将被阻塞
-   节点崩溃或离线，消息丢失？
    -   复制持久
-   批处理系统就有可靠保证
    -   失败任务自动重试，输出自动丢弃



生产者与消费者直接消息传递

-   生产者直接连接消费者，不通过中间节点
-   需要应用层检测消息丢失
-   有限的容错
-   需要双方一直在线



消息代理

-   消息持久化内存或磁盘
-   无限队列？6



消息代理与数据库对比

-   可能都使用XA或JTA参与两阶段提交
-   消息代理自动删除已消费的消息
-   消息代理支持订阅匹配



Pp. 413-417