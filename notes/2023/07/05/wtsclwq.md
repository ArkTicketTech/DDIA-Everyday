### 隔离性

主要解决并发控制问题，数据库同时被多个客户端访问，并且访问的内容有重合的部分，并且其中有一个写操作，就会遇到并发问题。

![img](https://wtsclwq.oss-cn-beijing.aliyuncs.com/fig7-1.png)

看图，按照最朴素的思想，counter被++了两次，最终结果应该是44，但是我们只得到了43。

> ACID 意义上的隔离性意味着，**同时执行的事务是相互隔离的**

怎么样才算是隔离的呢？我的理解：执行的结果应该像是逐个执行一样，也就是教科书里的可串行化（Serializability）。数据库 通过实现可串行化的隔离级别，能够让多个同时执行的事务看起来像逐个执行。

但是可串行化带来会带来性能问题，大部分数据库会提供更低级别的实现，让用户自行来决定。

### 持久性

简单来说就是不要给用户错觉，用户如果得到了一个事务成功的消息，那么这个事务的执行结果就应该是持久化了的。无论是崩溃还是重启，用户都应该能够再次看到自己的执行结果。

对于单机数据库，持久化就意味着落盘（WAL），在分布式中，持久化意味着结果同步到了多数节点。

为了能够实现上述承诺，数据库应该等到持久化之后再向用户报告事务完成。

> **完美的持久性是不存在的** ：如果所有硬盘和所有备份同时被销毁，那显然没有任何数据库能救得了你。

