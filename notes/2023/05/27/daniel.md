## 三、多主复制拓扑结构

复制拓扑结构描述了写入从一个节点到另一个节点的通信路径。如果有两个领导者，则只有一种合理的拓扑结构：领导者1必须将其所有写入发送到领导者2，反之亦然。有多个领导者时，可能存在各种不同的拓扑结构。

**全互连拓扑：**（all-to-all）其中每个领导者将其写入发送到每个其他领导者。不过也会使用更受限制的拓扑结构。例如，MySQL默认仅支持循环拓扑结构，在该结构中，每个节点从一个节点接收写入，并将这些写入转发到另一个节点。

**星形拓扑：**一个指定的根节点将写入转发到所有其他节点。星形拓扑结构可以推广为树形结构。
在循环和星形拓扑结构中，写入可能需要通过多个节点才能到达所有副本。因此，节点需要转发它们从其他节点接收到的数据更改。

为了防止无限复制循环，每个节点都被赋予一个唯一的标识符，并且在复制日志中，每个写入都带有它已经通过的所有节点的标识符。当节点接收到带有自己标识符的数据更改时，该数据更改将被忽略，因为节点知道它已经被处理过了。
