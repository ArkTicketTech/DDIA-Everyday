### 数据仓库

在业务系统的数据库上进行分析任务会大大影响正常的工作负载，因此一般会将收集到的数据导入到数仓中进行分析。

<img src="https://wtsclwq.oss-cn-beijing.aliyuncs.com/HAq8ekcmz65xGlO.png" alt="ddia-3-8-etl.png" style="zoom: 25%;" />

使用单独的数据仓库而不是直接查询OLTP系统 进行分析, 很大的优势在千数据仓库可以针对分析访问模式进行优化。

而前面讨论的B+Tree和LSM-Tree都不适合数仓

#### 同样接口后的不同

TP 和 AP 都可以使用 SQL 模型进行查询分析。但是由于其负载类型完全不同，在查询引擎实现和存储格式优化时，做出的设计决策也就大相径庭。因此，在同一套 SQL 接口的表面下，两者对应的数据库实现结构差别很大。

虽然有的数据库系统号称两者都支持，比如之前的 Microsoft SQL Server 和 SAP HANA，但是也正日益发展成两种独立的查询引擎。近年来提的较多的 HTAP 系统也是类似，其为了 serve 不同类型负载底层其实有两套不同的存储，只不过系统内部会自动的做数据的冗余和重新组织，对用户透明。

