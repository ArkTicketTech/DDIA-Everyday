### 数据模型与查询语言

大多数应用程序都是通过一层层叠加数据模型来构建。复杂的应用程序可能会有更多的中间层。

基本思想：每层都通过提供一个简洁的数据模型来隐藏下层的复杂性。

抽象机制可以是不同的人群之间高效协作。



#### 关系模型与文档模型

最著名的数据模型：SQL，基于关系模型，数据被组织成关系（relations），在SQL中称为表（table），每个关系都是元组（tuples）的无序集合（SQL中的行）。



##### NoSQL

含义：not only SQL

驱动因素：

-   比关系型数据库更好的扩展性（超大数据集，超高写入吞吐量）
-   偏爱免费或开源软件
-   关系模型不能很好的支持一些特定的查询操作
-   渴望更具动态和表达力的数据模型



##### 对象-关系不匹配

大多数应用开发基本都采用面向对象，应用层代码中的对象与表，行和列的数据库模型之间需要笨拙的转换。模型之间的脱离被称为阻抗失谐。

ORM框架减少了转换层所需的样板代码量，并不能完全隐藏模型之间的差异。



表示一对多的关系：

-   传统的SQL模型，使用外键。
-   SQL标准增加了对结构化数据类型，JSON数据和XML数据的支持。将多值数据存储在单行内，并支持查询和索引。
-   将数据编码为JSON和XML文档，存储在数据库的文本列中，并由应用程序解释其结构和内容。这种方法不能使用数据库查询列中的值。



##### 多对一与多对多的关系

无论存储ID还是文本字符串，都涉及内容重复。

使用ID的好处，对人类没有直接意义，不需要直接改变；即使ID标识的信息变化了，ID也保持不变。

任何对人类有意义的东西都会在某时刻发生变化。如果信息被复制，那么副本也需要更新。会导致更多的写入开销，有数据不一致的风险。

表达多对一的关系不适合文档模型。

关系数据库支联结操作，可以通过ID引用其他表中的行。



Pp. 33-40