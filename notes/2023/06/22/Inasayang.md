可串行化的快照隔离

-   可串行化的快照隔离（`Serializable Snapshot Isolation，SSI`）提供了完整的可串行化保证，性能损失小
    -   PostgreSQL 9.1-
    -   FoundationDB



基于过期的条件做决定

-   场景：事务需要根据查询的结果做出决定，但是在快照隔离下，数据可能被其他事务修改
-   如何知道查询的结果发生了变化
    -   检测是否读取了过期的MVCC对象
        -   从MVCC读取时，会忽略未提交的事务
        -   数据库跟踪由于MVCC可见性规则而被忽略的写操作，当事务提交时，检查是否存在当初被忽略的写操作现在完成了提交，是则中止当前事务
    -   检测写是否影响了之前的读
        -   另一个事务修改时，检查索引，确定是否存在读目标数据的事务，不会阻塞读取，知道读事务提交才通知



Pp. 246-256