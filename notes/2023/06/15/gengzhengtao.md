# 151-155

双主节点数据同步的脑裂现象，如何采取安全应急方案。
如何设置合适的超时来检测主节点失效呢，
节点失效、网络不可靠、副本一致性、持久性、可用性、延迟质检的拳皇，是分布式系统核心的基本问题
### 复制日志的实现，
1、主从复制技术，
   * 基于语句的复制，不适用的场景，调用非确定性幻术的，使用了自增列，有副作用的语句，触发器、存储过程、用户定义
2、基于预写日志（WAL）传输
   * 存储引擎的磁盘数据结构，每个写操作都已追加写的方式写入到日志中
   * 日志结构存储引擎，SSTABLE，LSM-trees，
   * 覆盖写磁盘的Btree
   依赖于数据库的存储格式，
3、基于行的逻辑日志复制，
    复制和存储逻辑分离，关系数据库的逻辑日志，典型代表，mysql的二进制binlog，基于行的复制。
可以更容易的保持向后兼容，
4、 基于触发器的复制。
     典型代表，Oracle GoldenGate，数据库的触发器，存储过程。
     oracle Databus,postgress bucarde
     开销高，但是具有高度灵活性。
### 复制滞后问题
最终一致性，
     1、 读自己的写，读写一致性，保证用户重新加载页面，总能看到自己最近提交更新。
    主从复制如何保证。
     
  
