#### 3. System Model and Reality
计时模型：
* 同步模型：同步模型假定有上界的网络延迟， 有上界的进程暂停和有上界的时钟误差。 但这并不意味着完全同步的时钟或者网络延迟为零。
* 部分同步模型：大部分情况下表现为同步系统一样运行，但有时候会超出网络延迟，进程暂停和时钟漂移的预期上界。
* 异步模型：该模型中，一个算法不会对时机做任何的假设， 甚至里面根本没有时钟（也就没有超时机制）。 某些算法可以支持纯异步模型， 但并不常见。

节点失效模型：
* 崩溃-中止模型：算法假设一个节点只能以一种方式发生故障， 即遭遇系统崩溃。 这意味着节点可能在任何时候突然停止响应， 且该节点以后永远消失， 无法恢复。
* 崩溃-恢复模型：节点可能会在任何时候发生崩溃， 且可能会在一段（未知的）时间之后得到恢复并再次响应。 在崩溃－恢复模型中， 节点上持久性存储（即非易失性存储）的数据会在崩溃之后得以保存， 而内存中状态可能会丢失。
* 拜占庭（任意）失效模型：节点可能发生任何事情， 包括试图作弊和欺骗其他节点。

分布式系统中，最普遍的组合是崩溃-恢复模型结合部分同步模型。


##### Correctness of an algorithm
以锁服务的 fencing 令牌生成算法为例，要求具备以下属性：
* 唯一性：两个令牌请求不能获得相同的值。
* 单调递增：返回令牌值要求单调递增
* 可用性：请求令牌的节点如果不发生崩溃则最终一定会收到响应。

##### Safety and liveness
Safety：不会发生意外。
liveness：预期的事情最终一定会发生。

对于分布式算法，要求在所有可能的系统模型下，都必须符合 Safety，即使所有节点发生崩溃，或者整个网络中断，算法确保不会返回错误的结果。

对于 liveness，存在一些必要条件，例如，部分节点宕机，网络最终可恢复，系统能返回到同步的一致同步。

##### Mapping system models to the real world
具体算法实施时，挑战更加严峻。

如下例子：
* 崩溃-恢复模型中，硬盘损坏或者硬件错误，无法恢复。
* Quorum 算法 发生丢数据的问题。

证明算法正确却并不意味着真实系统上的某个具体实现一定是正确的。
