消费者偏移量

磁盘空间使用

-   日志被分割成段，删除旧段或归档保存

当消费者跟不上生产者

-   代理有效地丢弃不能容纳的旧消息

数据库与流

保持系统同步

-   双重写入问题
    -   需要有并发检测机制
    -   原子提交

变更数据捕获（Change Data Capture，CDC）

-   CDC记录了写入数据库的所有更改，并以可复制到其他系统的形式来提取数据、
-   在写入时将更改作为流来发布
-   将数据按顺序写入数据库，再按相同顺序将变化应用到其他系统

实现变更数据捕获

-   数据库触发器也是一种变更数据捕获，但是性能开销大，可以转换成解析复制日志

Pp. 422-427