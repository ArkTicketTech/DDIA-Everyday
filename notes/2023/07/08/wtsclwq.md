#### 如何实现

读已提交这个级别是很多数据库的默认配置，比如Pg、SQL Server、Oracle11g

两种途径：

1. 行锁：长写锁和短读锁
2. MVCC：保存旧值，读写事务和读事务在读该值的时候只会拿到旧值，写事务会在此基础上更新，只有事务提交后，新值才会保存。当然提交的时候也有很多规则

### 快照隔离和可重复读

![Untitled](https://wtsclwq.oss-cn-beijing.aliyuncs.com/ch07-fig06.png)

考虑上述问题，A有两个账户，分别由500存款，但是两个账户在进行交易期间，分别对两个账户查询余额，得到的总和却不是1000。

这是一个不可重复读的现象，虽然每次读到的都是已提交的数据。但是出现了数据不一致。

要解决该问题，可以采用快照隔离：

> 每个事务都可以取得一个某个时间点的**一致性快照**（consistent snapshot），在整个事务期间，读到的状态都是该时间点的快照。其他事务的修改并不会影响到该快照上。

#### 如何实现

快照隔离的原则是**读不阻塞写，写不阻塞读**，为了实现快照隔离，就要实现MVCC。在读已提交的时候，也提到过MVCC，但是依靠MVCC实现读已提交只需维护两个版本的快照。而要实现快照隔离，就需要维护多个版本的快照。
