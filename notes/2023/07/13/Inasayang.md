UNIX设计哲学

-   每个程序做好一件事，如果要做新工作，就建立一个新的程序，而不是通过增加新“特征”使就程序变得更加复杂
-   期待每个程序的输出成为另一个尚未确定的程序的输入，不要将输出与无关信息混淆在一起；避免使用严格的表格状或二进制输入格式；不要使用交互式输入
-   尽早尝试设计和构建软件
-   优先使用工具来减轻编程任务



统一接口

-   在UNIX中，统一接口是文件（文件描述符），文件只是一个有序的字节序列



逻辑与布线分离

-   UNIX工具的另一个特点，使用标准输入（`stdin`）和标准输出（`stdout`）
-   如果运行一个程序不指定任何参数，则标准输入来自键盘，标准输出为屏幕



`MapReduce`与分布式文件系统

`MapReduce`作业执行

-   `map`和`reduce`是用户编写的自定义数据处理代码
-   `mapper`的输出之中会排序后再传递给`reducer`
-   要创建`MapReduce`作业，要实现两个回调函数，即`mapper`和`reducer`
    -   `Mapper`
        -   每个输入记录都会调用一次`mapper`程序，其任务是从输入记录中提取关键字和值
        -   每个输入可以生成任意数量的键值对（包括空记录）
        -   不会保留从一个记录到下一个记录的任何状态
    -   `Reducer`
        -   使用有`mapper`生成的键值对，收集属于同一个关键字的所有值
        -   使用迭代器调用`reducer`以使用该值的集合



MapReduce的分布式执行

-   一个输入文件的大小通常是几百兆字节
-   MapReduce调度器会尝试在输入文件副本的某台机器上运行mapper任务（将计算靠近数据：避免通过网络复制文件，减少网络负载，提高访问局部性）
-   MapReduce框架要复制代码或者可执行文件到节点上，启动map任务并开始读取输入文件，每次将一条记录传递给回调函数mapper
-   Reduce任务中的计算被分割成块，Map任务的数量由输入文件块的数量决定，而reduce任务的数量由作业的作者来配置。为了确保具有相同关键字的所有键值对都在相同的reducer任务中处理，使用关键字的哈希值来确定哪个reducer任务接收特定的键值对
-   键值对必须进行排序；数据量太大，无法在单台机器上使用常规排序算法；排序是分阶段进行

Pp. 371-380