## 流处理

流可以做什么？

1. 写入数据库、缓存、搜索引擎或类似的存储系统，然后能被其他客户端查询；
2. 以某种方式将事件推送给用户，例如发送报警邮件，或者将流传输到可以实时显示的仪表盘上；
3. 处理多个流来产生衍生流

我们将讨论第3点。

### 流处理的应用

长期以来，流处理一直用于监控目的：

1. 欺诈检测系统
2. 交易系统需要实时检查金融市场的价格变化；
3. 制造系统对工厂机器的监控
4. 军事和情报系统



#### 复合事件处理

复合事件处理（complex event processing, CEP）与正则表达式允许你在字符串中搜索特定字符模式的方式类似，CEP 允许你指定规则以在流中搜索某些事件模式



#### 流分析

使用流处理的另一个领域是对流进行分析，关注的是大量事件上的聚合与统计指标

你可能想知道在过去 5 分钟内服务每秒查询次数的均值，以及此时间段内响应时间的第 99 百分位点

流分析系统有时会使用概率算法，例如 Bloom filter



#### 维护物化视图

在某个数据集上衍生出一个替代视图以便高效查询，并在底层数据变更时更新视图，这也被称为**物化视图（materialized view）** 。

同样，在事件溯源中，应用程序状态也是一种物化视图。

#### 在流上搜索

预先构建一个搜索查询，然后让流经过这个搜索查询，查询被存储下来，文档从查询中流过。这个很有应用场景，比如媒体监测服务可以订阅新闻文章 Feed 与来自媒体的播客，搜索任何关于公司、产品或感兴趣的话题的新闻。

但是如果你有大量查询，这可能会变慢。为了优化这个过程，可以像对文档一样，为查询建立索引。因而收窄可能匹配的查询集合



#### 消息传递和RPC
